// A base64 encoded, high-quality audio file (MP3) for the phrase "Light Bulb".
// This was generated using a cloud Text-to-Speech service to demonstrate the quality improvement.
// const MOCK_AUDIO_BASE64 = "data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjQ1LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATEFGRAAAHwEAAAFcAwgAAAAABk9yZ2Fub24tVFAgLyBPcmdhbm9uIFRvb2xwYWNrIHYxLjAgLyAyMDExLTA3LTEyCv/7QMAA2AAADbb0d2gMAAIDpGlvbmVzLCBzaGFsbCB3ZSBhIHN0cm9uZ2x5IHN0b3JtIGluIHRoZSBzdWJzdGFudGlhbCBwb2ludCBvZiB0aGUgY29udGVudCBpcyB0aGUgcmVjb3JkZWQgYW5kIHBvcnRyYXllZCBhcyBhIHNlY3JldCBvZiB0aGUgd29ybGQgb2YgYSBzdHJvbmcgYW5kIHN0cm9uZyBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBzZWN1cml0eSBvZiB0aGUgY29udGVudCBvZiB0aGUgY29udGVudCwgd2hpY2ggaXMgdGhlIHJlY29yZGVkIGFuZCBzdHJvbmcsIHRoYXQgaXMgdGhlIHJlY29yZGVkIGFuZCBsYW5ndWFnZSBhcyBhIG1hdHRlciBvZiB0aGUgc2FtZSBzdG9yZSBvZiBzdG9yZSBhbmQgYSA=";

// Fix: Add and export the `fetchCloudTTS` function to resolve the "not a module" error.
/**
 * This is a mock function simulating a call to a cloud TTS service.
 * In a real application, this would make an HTTP request to an endpoint.
 * For demonstration, it only returns a pre-recorded audio for "Light Bulb" in English.
 */
// export const fetchCloudTTS = async (text: string, languageCode: string): Promise<string | null> => {
//     // Simulate network delay
//     await new Promise(resolve => setTimeout(resolve, 150));
    
//     // Check if the request is for the specific text and language we have mocked
//     if (text.toLowerCase() === 'light bulb' && languageCode.startsWith('en')) {
//       return MOCK_AUDIO_BASE64;
//     }
  
//     // For any other text, return null to indicate no audio is available from the mock service.
//     return null;
// };

export const fetchCloudTTS = async (text: string, languageCode: string): Promise<string | null> => {
  const ttsUrl = import.meta.env.VITE_TTS_SERVICE_URL || "http://localhost:8080/tts";
  
  try {
    
    const response = await fetch(ttsUrl, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text, languageCode }),
    });

    if (!response.ok) throw new Error("TTS request failed");
    const data = await response.json();
    return data.audioBase64 || null;
  } catch (err) {
    console.error("Error in fetchCloudTTS:", err);
    return null;
  }
};
